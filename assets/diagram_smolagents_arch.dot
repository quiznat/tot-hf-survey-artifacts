digraph G {
  graph [bgcolor="#ffffff", pad="0.06", nodesep="0.34", ranksep="0.50", splines="polyline", fontname="Times-Roman", fontcolor="#162130", margin="0.02", rankdir="TB", ranksep="0.58", nodesep="0.38"];
  node [shape="box", style="filled", fillcolor="#ffffff", color="#445a79", penwidth="1.5", fontname="Times-Roman", fontsize="14", margin="0.08,0.07"];
  edge [color="#445a79", penwidth="1.3", arrowsize="0.70", fontname="Times-Roman", fontsize="11", fontcolor="#162130"];

  agents [label="Agents\nCodeAgent\nToolAgent\nMultiStepAgent", width="2.10", group="g1"];
  models [label="Models\nHfApiModel\nLiteLLM\nOpenAI", width="2.10", group="g2"];
  tools [label="Tools\n@tool\nTool\nPipeline", width="2.10", group="g3"];

  memory [label="Memory\nStep Log\nTool Calls\nErrors", width="2.10", group="g1"];
  planning [label="Planning\nAction\nSelection\nTool Pick", width="2.10", group="g2"];
  execution [label="Execution\nCode\nExecution\nSandbox", width="2.10", group="g3"];

  { rank=same; agents; models; tools }
  { rank=same; memory; planning; execution }

  agents -> models [dir=none, arrowhead=none, arrowtail=none];
  models -> tools [dir=none, arrowhead=none, arrowtail=none];

  agents -> memory [tailport=s, headport=n, weight=100, minlen=2];
  models -> planning [tailport=s, headport=n, weight=100, minlen=2];
  tools -> execution [tailport=s, headport=n, weight=100, minlen=2];

  memory -> planning [style=invis, weight=10];
  planning -> execution [style=invis, weight=10];
}
